
@model office.Models.CompanyDetailsLeftSide

@{
    Layout = null;
} 
 
<div class="row">

    <div class="col-lg-12">
        <h5 class="help-block m-b-none">Certification </h5>
        <hr style="margin-top: 11px; margin-bottom: 10px;" />
    </div>

    @foreach (var item2 in Model.SaveCertification)
    {
        <span class="col-lg-12 showMobileNo showCertification" CertificationID="@item2.CertificationID" CertificationValue="@item2.Value" CompanyCertificationsDetailID="@item2.CompanyCertificationsDetailID" style="overflow-wrap:break-word;">
            @item2.CertificationText   @item2.Value

            <i class="fa fa-pencil-square-o EditCertification" CertificationID="@item2.CertificationID" id="EditCertification-@item2.Value" CertificationValue="@item2.Value" CompanyCertificationsDetailID="@item2.CompanyCertificationsDetailID" aria-hidden="true" style="margin-left: 8px; margin-top: 9px;"></i>
        </span>
    }

    <div class="divCertification">
        <table class="table" id="tblCertification">
            <thead>

            </thead>
            <tbody></tbody>
        </table>
    </div>
</div>
<div class="row"> 
    <div class="col-lg-12">
        <hr style="margin-top: 11px; margin-bottom: 10px;">
        <h5 class="help-block m-b-none">Office Address</h5> 
    </div> 
</div>
<div class="row">
    <div class="col-lg-12">
        <div class="divAddress">
           
            @if (Model.CompanyID != 0)
            {
                <hr style="margin-top: 11px; margin-bottom: 10px;">
                <div>
                    @foreach (var item in Model.CompanyAddress)
                    {
                        int k = 1,l=1;
                    <div class="row">
                        @foreach (var item1 in Model.SaveCompanyMobile)
                        {
                            if (item1.AddressID == item.AddressID)
                            {
                                if (item1.Type == 3)
                                {
                                    <div>
                                        <span class="col-lg-12 showEmailID showEmailID-@k" MobileType="@item1.Type" MobileNo="@item1.Value" Extension="@item1.Extension" CompanyPhoneID="@item1.CompanyPhoneID" WorkDepartmentID="@item1.WorkDepartmentID" style="overflow-wrap:break-word;">
                                            @item1.Value -
                                            @item1.Extension - @item1.WorkDepartmentID
                                        </span>
                                    </div>
                                    k++;
                                }
                                else
                                {
                                    <div>
                                        <span class="col-lg-12 showMobileNo showMobileNo-@l" MobileType="@item1.Type" MobileNo="@item1.Value" Extension="@item1.Extension" CompanyPhoneID="@item1.CompanyPhoneID" WorkDepartmentID="@item1.WorkDepartmentID" style="overflow-wrap:break-word;">
                                            @item1.Value -
                                            @item1.Extension - @item1.WorkDepartmentID
                                        </span>
                                    </div>
                                    l++;
                                }
                                 
                            }
                        }

                        <div class=" MultiOfficeAddress" liveaddressID="@item.AddressID" ofcaddress1="@item.Address1" ofcaddress2="@item.Address2" stateid2val="@item.StateID" ofcdistrict="@item.District" cityid2val="@item.CityID" ofczip="@item.ZipCode">
                            <span id="showOfcaddress1" class="col-lg-12" style="overflow-wrap:break-word;">
                                @item.Address1
                                &nbsp; &nbsp; &nbsp;
                                <i class="fa fa-pencil-square-o EditAddress" addressID="@item.AddressID" id="EditAddress-@item.AddressID" aria-hidden="true" style="margin-left: 8px; margin-top: 9px;"></i>

                            </span>
                        </div>
                        <div>
                            <span id="showOfcaddress2" class="col-lg-12" style="overflow-wrap:break-word;">@item.Address2</span>
                        </div>
                        <div>
                            <span id="showOfcstate" class="col-lg-12" style="overflow-wrap:break-word;">
                                @item.StateID
                                @item.District
                            </span>

                        </div>
                        <div>
                            <span id="showOfccity" class="col-lg-12" style="overflow-wrap:break-word;">
                                @item.CityID
                                @item.ZipCode
                            </span>

                        </div>
                    </div>
                        <hr style="margin-top: 11px; margin-bottom: 10px;">
                    }


                </div>
            }
        </div>
    </div>
</div>
    <div class="row">

        <div class="col-lg-12">
            <h5 class="help-block m-b-none">Internal Team </h5>
            <hr style="margin-top: 11px; margin-bottom: 10px;" /> 
        </div> 
        <div class="DivInternalTeam ">
            @foreach (var item4 in Model.SaveInternalTeam)
            {
                <div >
                    <span class="col-lg-12 showInternalTeam" internalpersonid="@item4.internalpersonid" designationid1="@item4.designationid1" subdesignationid1="@item4.subdesignationid1" subpartdesignationid1="@item4.subpartdesignationid1" internalTeamid="@item4.internalTeamid" style="overflow-wrap:break-word;">
                        @item4.InternalPersonName
                        @item4.DesignationidText
                        @item4.SubDesignationText
                        @item4.SubPartDesignationText
                        <i class="fa fa-pencil-square-o EditinternalTeam" internalTeamid="@item4.internalTeamid" id="EditInternalTeam-@item4.internalTeamid" aria-hidden="true" style="margin-left: 8px; margin-top: 9px;"></i>
                    </span>
                </div>

            }
        </div>
    </div>
    <div class="row">

        <div class="col-lg-12">
            <hr style="margin-top: 11px; margin-bottom: 10px;">
            <h5 class="help-block m-b-none">Support Team </h5>
            <hr style="margin-top: 11px; margin-bottom: 10px;" />

        </div>

        <div class=" DivSupportTeam ">
            @foreach (var item5 in Model.SaveExternalTeam)
            {
                <div>
                    <span class="col-lg-12 showExternalTeam" RelationId="@item5.RelationId" CategoryId="@item5.CategoryId" SubCategoryId="@item5.SubCategoryId" ExternalPersonId="@item5.ExternalPersonId" DesignationId="@item5.DesignationId" SubDesignationId="@item5.SubDesignationId" SubpartDesignationId="@item5.SubpartDesignationId" ExternalTeamid="@item5.ExternalTeamid" style="overflow-wrap:break-word;">
                        @item5.ExternalPersonName
                        @item5.RelationName
                        @item5.CategoryName
                        @item5.SubCategoryName
                        <br />
                        @item5.DesignationidText
                        @item5.SubDesignationText
                        @item5.SubPartDesignationText
                        <i class="fa fa-pencil-square-o EditExternalTeam" ExternalTeamid="@item5.ExternalTeamid" id="EditExternalTeam-@item5.ExternalTeamid" aria-hidden="true" style="margin-left: 8px; margin-top: 9px;"></i>
                    </span>
                </div>

            }
        </div>
    </div>

    <script>
        $(document).ready(function () {
          $('.removeMultiMobile').on("click", function (e) {
               
              var MobileID = $(this).closest(".rowMobile").find("#CompanyPhoneIDValue").val();
              if (MobileID > 0) {

              }
              else {
                  var MobileLength = $('.rowMobile').length;
                  if (MobileLength > 1) {
                      $(this).closest(".rowMobile").remove();
                  }
                 
              }
            });
            $('.removeMultiEmail').on("click", function (e) {

                var MobileID = $(this).closest(".rowEmail").find("#CompanyPhoneIDValue").val();
                if (MobileID > 0) {

                }
                else {
                    var MobileLength = $('.rowEmail').length;
                    if (MobileLength > 1) {
                        $(this).closest(".rowEmail").remove();
                    }

                }
            });
        $('.EditAddress').on("click", function (e) {
            
            $(".iboxOffice").show();
            $(".iboxCompanynfo").hide();
            $(".iboxInternal").hide();
            $(".iboxexternal").hide();
            $("#MobileType").val(0);
            $("#MobileNo").val("");
            $("#MobileWorkDepartment").val(0);
            $("#MobileNoExtension").val("");

            if ($("#row1").length > 0) {
                $("#row1").remove();
            }
            if ($("#row2").length > 0) {
                $("#row2").remove();
            }
            if ($("#row3").length > 0) {
                $("#row3").remove();
            }
            if ($("#row4").length > 0) {
                $("#row4").remove();
            }
            $("#DbAddressID").val(0);
            var liveaddressID = $(this).closest(".MultiOfficeAddress").attr("liveaddressID");

            $("#DbAddressID").val(liveaddressID);
            var ofcaddress1 = $(this).closest(".MultiOfficeAddress").attr("ofcaddress1");
            var ofcaddress2 = $(this).closest(".MultiOfficeAddress").attr("ofcaddress2");
            var stateid2val = $(this).closest(".MultiOfficeAddress").attr("stateid2val");
            var ofcdistrict = $(this).closest(".MultiOfficeAddress").attr("ofcdistrict");
            var cityid2val = $(this).closest(".MultiOfficeAddress").attr("cityid2val");
            var ofczip = $(this).closest(".MultiOfficeAddress").attr("ofczip");
            $("#OfcAddress1").val(ofcaddress1);
            $("#OfcAddress2").val(ofcaddress2);
            $("#StateID2").val(stateid2val);
            GetCity();
            $("#OfcDistrict").val(ofcdistrict);
            $("#CityID2").val(cityid2val);
            var MobileLength = $(this).closest(".MultiOfficeAddress").parent().find(".showMobileNo").length
            for (var i = 1; i < MobileLength; i++) {

                $('#rowMobile')
                    .clone(true)
                    .attr('id', 'row' + i, 'name', 'rowMobilen')
                    .insertAfter('[id^=rowMobile]:last').find("input[type='text']").val(""); 
            } 

            var j = 1;

            if (MobileLength >= j) {

                if (j == 1) {
                    var MobileType = $(this).closest(".MultiOfficeAddress").parent().find(".showMobileNo-1").attr("MobileType");
                    var MobileNo = $(this).closest(".MultiOfficeAddress").parent().find(".showMobileNo-1").attr("MobileNo");
                    var extension = $(this).closest(".MultiOfficeAddress").parent().find(".showMobileNo-1").attr("extension");
                    var companyphoneid = $(this).closest(".MultiOfficeAddress").parent().find(".showMobileNo-1").attr("companyphoneid");
                    var workdepartmentid = $(this).closest(".MultiOfficeAddress").parent().find(".showMobileNo-1").attr("workdepartmentid");

                    $("#rowMobile").find("#MobileNo").val(MobileNo);
                    $("#rowMobile").find("#MobileNoExtension").val(extension);
                   // $("#rowMobile").find("#companyphoneid").val(companyphoneid);
                    $("#rowMobile").find("#CompanyPhoneIDValue").val(companyphoneid);
                    $("#rowMobile").find("#MobileWorkDepartment").val(workdepartmentid);
                    $("#rowMobile").find("#MobileType").val(MobileType);

                    j++;
                }
                if (j == 2) {

                    var MobileType = $(this).closest(".MultiOfficeAddress").parent().find(".showMobileNo-" + j).attr("MobileType");
                    var MobileNo = $(this).closest(".MultiOfficeAddress").parent().find(".showMobileNo-" + j).attr("MobileNo");
                    var extension = $(this).closest(".MultiOfficeAddress").parent().find(".showMobileNo-" + j).attr("extension");
                    var companyphoneid = $(this).closest(".MultiOfficeAddress").parent().find(".showMobileNo-" + j).attr("companyphoneid");
                    var workdepartmentid = $(this).closest(".MultiOfficeAddress").parent().find(".showMobileNo-" + j).attr("workdepartmentid");
                    $("#row1").find("#MobileNo").val(MobileNo);
                    $("#row1").find("#MobileNoExtension").val(extension);
                    $("#row1").find("#companyphoneid").val(companyphoneid);
                    $("#row1").find("#MobileWorkDepartment").val(workdepartmentid);
                    $("#row1").find("#MobileType").val(MobileType);
                    j++;
                }
                if (j == 3) {

                    var MobileType = $(this).closest(".MultiOfficeAddress").parent().find(".showMobileNo-" + j).attr("MobileType");
                    var MobileNo = $(this).closest(".MultiOfficeAddress").parent().find(".showMobileNo-" + j).attr("MobileNo");
                    var extension = $(this).closest(".MultiOfficeAddress").parent().find(".showMobileNo-" + j).attr("extension");
                    var companyphoneid = $(this).closest(".MultiOfficeAddress").parent().find(".showMobileNo-" + j).attr("companyphoneid");
                    var workdepartmentid = $(this).closest(".MultiOfficeAddress").parent().find(".showMobileNo-" + j).attr("workdepartmentid");
                    $("#row2").find("#MobileNo").val(MobileNo);
                    $("#row2").find("#MobileNoExtension").val(extension);
                    $("#row2").find("#companyphoneid").val(companyphoneid);
                    $("#row2").find("#MobileWorkDepartment").val(workdepartmentid);
                    $("#row2").find("#MobileType").val(MobileType);
                    j++;
                }
                if (j == 4) {

                    var MobileType = $(this).closest(".MultiOfficeAddress").parent().find(".showMobileNo-" + j).attr("MobileType");
                    var MobileNo = $(this).closest(".MultiOfficeAddress").parent().find(".showMobileNo-" + j).attr("MobileNo");
                    var extension = $(this).closest(".MultiOfficeAddress").parent().find(".showMobileNo-" + j).attr("extension");
                    var companyphoneid = $(this).closest(".MultiOfficeAddress").parent().find(".showMobileNo-" + j).attr("companyphoneid");
                    var workdepartmentid = $(this).closest(".MultiOfficeAddress").parent().find(".showMobileNo-" + j).attr("workdepartmentid");
                    $("#row3").find("#MobileNo").val(MobileNo);
                    $("#row3").find("#MobileNoExtension").val(extension);
                    $("#row3").find("#companyphoneid").val(companyphoneid);
                    $("#row3").find("#MobileWorkDepartment").val(workdepartmentid);
                    $("#row3").find("#MobileType").val(MobileType);
                    j++;
                }
            }

            var EmailLength = $(this).closest(".MultiOfficeAddress").parent().find(".showEmailID").length
            for (var i = 1; i < MobileLength; i++) {

                $('#rowEmail')
                    .clone(true)
                    .attr('id', 'rowEmail' + i, 'name', 'rowEmailn')
                    .insertAfter('[id^=rowEmail]:last').find("input[type='text']").val("");
            }

            var j = 1;

            if (EmailLength >= j) {

                if (j == 1) {
                    var MobileType = $(this).closest(".MultiOfficeAddress").parent().find(".showEmailID-1").attr("MobileType");
                    var MobileNo = $(this).closest(".MultiOfficeAddress").parent().find(".showEmailID-1").attr("MobileNo");
                    var extension = '';// $(this).closest(".MultiOfficeAddress").parent().find(".showMobileNo-1").attr("extension");
                    var companyphoneid = $(this).closest(".MultiOfficeAddress").parent().find(".showEmailID-1").attr("companyphoneid");
                    var workdepartmentid = $(this).closest(".MultiOfficeAddress").parent().find(".showEmailID-1").attr("workdepartmentid");

                    $("#rowEmail").find("#MobileNo").val(MobileNo);
                    $("#rowEmail").find("#MobileNoExtension").val(extension);
                    // $("#rowMobile").find("#companyphoneid").val(companyphoneid);
                    $("#rowEmail").find("#CompanyPhoneIDValue").val(companyphoneid);
                    $("#rowEmail").find("#MobileWorkDepartment").val(workdepartmentid);
                    $("#rowEmail").find("#MobileType").val(MobileType);

                    j++;
                }
                if (j == 2) {

                    var MobileType = $(this).closest(".MultiOfficeAddress").parent().find(".showEmailID-" + j).attr("MobileType");
                    var MobileNo = $(this).closest(".MultiOfficeAddress").parent().find(".showEmailID-" + j).attr("MobileNo");
                    var extension = "";// $(this).closest(".MultiOfficeAddress").parent().find(".showEmailID-" + j).attr("extension");
                    var companyphoneid = $(this).closest(".MultiOfficeAddress").parent().find(".showEmailID-" + j).attr("companyphoneid");
                    var workdepartmentid = $(this).closest(".MultiOfficeAddress").parent().find(".showEmailID-" + j).attr("workdepartmentid");
                    $("#rowEmail1").find("#MobileNo").val(MobileNo);
                    $("#rowEmail1").find("#MobileNoExtension").val(extension);
                    $("#rowEmail1").find("#companyphoneid").val(companyphoneid);
                    $("#rowEmail1").find("#MobileWorkDepartment").val(workdepartmentid);
                    $("#rowEmail1").find("#MobileType").val(MobileType);
                    j++;
                }
                if (j == 3) {

                    var MobileType = $(this).closest(".MultiOfficeAddress").parent().find(".showEmailID-" + j).attr("MobileType");
                    var MobileNo = $(this).closest(".MultiOfficeAddress").parent().find(".showEmailID-" + j).attr("MobileNo");
                    var extension = '';// $(this).closest(".MultiOfficeAddress").parent().find(".showEmailID-" + j).attr("extension");
                    var companyphoneid = $(this).closest(".MultiOfficeAddress").parent().find(".showEmailID-" + j).attr("companyphoneid");
                    var workdepartmentid = $(this).closest(".MultiOfficeAddress").parent().find(".showEmailID-" + j).attr("workdepartmentid");
                    $("#rowEmail2").find("#MobileNo").val(MobileNo);
                    $("#rowEmail2").find("#MobileNoExtension").val(extension);
                    $("#rowEmail2").find("#companyphoneid").val(companyphoneid);
                    $("#rowEmail2").find("#MobileWorkDepartment").val(workdepartmentid);
                    $("#rowEmail2").find("#MobileType").val(MobileType);
                    j++;
                }
                if (j == 4) {

                    var MobileType = $(this).closest(".MultiOfficeAddress").parent().find(".showEmailID-" + j).attr("MobileType");
                    var MobileNo = $(this).closest(".MultiOfficeAddress").parent().find(".showEmailID-" + j).attr("MobileNo");
                    var extension = "";// $(this).closest(".MultiOfficeAddress").parent().find(".showEmailID-" + j).attr("extension");
                    var companyphoneid = $(this).closest(".MultiOfficeAddress").parent().find(".showEmailID-" + j).attr("companyphoneid");
                    var workdepartmentid = $(this).closest(".MultiOfficeAddress").parent().find(".showEmailID-" + j).attr("workdepartmentid");
                    $("#rowEmai3").find("#MobileNo").val(MobileNo);
                    $("#rowEmai3").find("#MobileNoExtension").val(extension);
                    $("#rowEmai3").find("#companyphoneid").val(companyphoneid);
                    $("#rowEmai3").find("#MobileWorkDepartment").val(workdepartmentid);
                    $("#rowEmai3").find("#MobileType").val(MobileType);
                    j++;
                }
            }
        });
        
        $('.EditCertification').on("click", function (e) {
            var certificationvalue = $(this).attr("certificationvalue");
            var certificationid = $(this).attr("certificationid");
            var CompanyCertificationsDetailID = $(this).attr("CompanyCertificationsDetailID");
            
            $("#CertificationDetailID").val(CompanyCertificationsDetailID);
            $("#CertificationID").val(certificationid);
            $("#CertificationValue").val(certificationvalue);
        });
        $('.EditinternalTeam').on("click", function (e) {
            $(".iboxOffice").hide();
            $(".iboxCompanynfo").hide();
            $(".iboxInternal").show();
            $(".iboxexternal").hide();
            $("select#InternalPersonId").prop('selectedIndex', 0);
            $("select#DesignationId1").prop('selectedIndex', 0);
            $("select#SubDesignationID1").prop('selectedIndex', 0);
            $("select#SubPartDesignationID1").prop('selectedIndex', 0);
            var internalteamid = $(this).attr("internalteamid");
            $("#DbInternalTeamID").val(internalteamid);

            var internalpersonid = $(this).closest(".showInternalTeam").attr("internalpersonid");
            var designationid1 = $(this).closest(".showInternalTeam").attr("designationid1");
            var subdesignationid1 = $(this).closest(".showInternalTeam").attr("subdesignationid1");
            var subpartdesignationid1 = $(this).closest(".showInternalTeam").attr("subpartdesignationid1");


            $("#InternalPersonId").val(internalpersonid);
            $("#DesignationId1").val(designationid1);
            GetSubDesignation();
            $("#SubDesignationID1").val(subdesignationid1);
            GetSubPartDesignation();
            $("#SubPartDesignationID1").val(subpartdesignationid1);


        });

        $('.EditExternalTeam').on("click", function (e) {
            $(".iboxOffice").hide();
            $(".iboxCompanynfo").hide();
            $(".iboxInternal").hide();
            $(".iboxexternal").show();
            $("select#RelationID").prop('selectedIndex', 0);
            $("select#CategoryID2").prop('selectedIndex', 0);
            $("select#SubCategoryID").prop('selectedIndex', 0);
            $("select#SupportCompanyID").prop('selectedIndex', 0);
            $("select#SupportPersonId").prop('selectedIndex', 0);
            $("select#DesignationId2").prop('selectedIndex', 0);
            $("select#SubDesignationID2").prop('selectedIndex', 0);
            $("select#SubPartDesignationID2").prop('selectedIndex', 0);
            
            var externalteamid = $(this).attr("externalteamid");
            $("#DbExternalTeamID").val(externalteamid);

            var relationid = $(this).closest(".showExternalTeam").attr("relationid");
            var categoryid = $(this).closest(".showExternalTeam").attr("categoryid");
            var subcategoryid = $(this).closest(".showExternalTeam").attr("subcategoryid");
            var externalpersonid = $(this).closest(".showExternalTeam").attr("externalpersonid");

            var designationid = $(this).closest(".showExternalTeam").attr("designationid");
            var subdesignationid = $(this).closest(".showExternalTeam").attr("subdesignationid");
            var subpartdesignationid = $(this).closest(".showExternalTeam").attr("subpartdesignationid");
            
            $("#RelationID").val(relationid);
            $("#CategoryID2").val(categoryid);
            GetSupportTeamSubCategory();
            $("#SubCategoryID2").val(subcategoryid);
          //  $("#SupportCompanyID").val(externalpersonid);
            $("#SupportPersonId").val(externalpersonid);
            $("#DesignationId2").val(designationid);
            GetSupportTeamSubDesignation();
            $("#SubDesignationID2").val(subdesignationid);
            GetSupportTeamSubPartDesignation();
            $("#SubPartDesignationID2").val(subpartdesignationid);
           });
    });
        function GetSubDesignation() { 
          $.ajax({
            url: "@Url.Action("BindTeamSubDesignation", "Master")",
            contentType: "application/json",
                data: JSON.stringify({
                    DesignationID: $('#DesignationId1').val(),
            }),
            dataType: "text",
              type: "POST",
              async: false,
                success: function (data) {
                $('#SubDesignationID1').html(data);

            },
            error: function (data) { 
                 
            },
            complete: function () {

            }

            });
            return true;
        }
        function GetSubPartDesignation() {

            $.ajax({
            url: "@Url.Action("BindTeamSubPartDesignation", "Master")",
            contentType: "application/json",
                data: JSON.stringify({
                    SubDesignationId: $('#SubDesignationID1').val(),
            }),
            dataType: "text",
            type: "POST",
            async: false,
                success: function (data) {
                $('#SubPartDesignationID1').html(data);

            },
            error: function (data) {


            },
            complete: function () {

            }

            });
            return true;
        }

        function GetSupportTeamSubCategory() {
            $.ajax({
                url: "@Url.Action("CategoryWiseSubCategory", "Master")",
                contentType: "application/json",
                data: JSON.stringify({
                    CategoryID: $('#CategoryID2').val(),
                    val:2
                }),
               // dataType: "text",
                type: "POST",
                async: false,
                success: function (data) {
                
                    $('#SubCategoryID2').html(data);
                },
                error: function (data) {
                    debugger;
                    console.log(data);
                },
                complete: function () {
                }
            });
            return true;
        }
    function GetSupportTeamSubDesignation() {
        $.ajax({
            url: "@Url.Action("BindTeamSubDesignation", "Master")",
            contentType: "application/json",
            data: JSON.stringify({
                DesignationID: $('#DesignationId2').val(),
                Val: 2
            }),
            dataType: "text",
            type: "POST",
            async: false,
            success: function (data) {
                $('#SubDesignationID2').html(data);
            },
            error: function (data) {


            },
            complete: function () {

            }

        });
        return true;
    }

    function GetSupportTeamSubPartDesignation() {

        $.ajax({
            url: "@Url.Action("BindTeamSubPartDesignation", "Master")",
            contentType: "application/json",
            data: JSON.stringify({
                SubDesignationId: $('#SubDesignationID2').val(),
                Val: 2
            }),
            dataType: "text",
            type: "POST",
            async: false,
            success: function (data) {
                $('#SubPartDesignationID2').html(data);

            },
            error: function (data) {


            },
            complete: function () {

            }

        });
        return true;
    }

    </script>
